<div class="covid-data-container" style="padding: 20px; min-height: 600px; width: 100%; border: 1px solid #eee;">
    <h2 style="color: #333; margin-bottom: 20px;">Statistiques COVID-19 par Pays</h2>
    
    <!-- Statistiques globales -->
    <!-- <div class="global-stats" style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px;">
        <div class="stat-card" style="flex: 1; min-width: 150px; padding: 15px; background: white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border-radius: 4px;">
            <div class="stat-title">Total Confirmés</div>
            <div class="stat-value" style="font-size: 24px; font-weight: bold;">{{totalCases | number}}</div>
        </div>
        <div class="stat-card" style="flex: 1; min-width: 150px; padding: 15px; background: white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border-radius: 4px;">
            <div class="stat-title">Total Décès</div>
            <div class="stat-value" style="font-size: 24px; font-weight: bold; color: #d32f2f;">{{totalDeaths | number}}</div>
        </div>
        <div class="stat-card" style="flex: 1; min-width: 150px; padding: 15px; background: white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border-radius: 4px;">
            <div class="stat-title">Total Rétablis</div>
            <div class="stat-value" style="font-size: 24px; font-weight: bold; color: #2e7d32;">{{totalRecoveries | number}}</div>
        </div>
        <div class="stat-card" style="flex: 1; min-width: 150px; padding: 15px; background: white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border-radius: 4px;">
            <div class="stat-title">Taux de Mortalité</div>
            <div class="stat-value" style="font-size: 24px; font-weight: bold; color: #d32f2f;">{{mortalityRate}}%</div>
        </div>
        <div class="stat-card" style="flex: 1; min-width: 150px; padding: 15px; background: white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border-radius: 4px;">
            <div class="stat-title">Taux de Guérison</div>
            <div class="stat-value" style="font-size: 24px; font-weight: bold; color: #2e7d32;">{{recoveryRate}}%</div>
        </div>
    </div> -->

    <!-- Filtre pays -->
    <div style="margin: 20px 0;">
        <mat-form-field style="width: 100%;">
            <mat-label>Filtrer les pays</mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Ex. France" #input>
        </mat-form-field>
    </div>

    <!-- Tableau de données -->
    <div style="background: white; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-radius: 4px; overflow: hidden; margin-top: 20px; min-height: 400px;">
        <!-- Loading indicator -->
        <div *ngIf="isLoading" style="display: flex; justify-content: center; align-items: center; height: 100px;">
            Chargement des données...
        </div>

        <!-- Debug info -->
        <div style="padding: 10px; color: blue; font-size: 12px;">
            Nombre de pays: {{dataSource.data.length}}
        </div>
        
        <!-- Table -->
        <table mat-table [dataSource]="dataSource" matSort style="width: 100%;">
            <!-- Country Column -->
            <ng-container matColumnDef="country">
                <th mat-header-cell *matHeaderCellDef mat-sort-header style="min-width: 150px;"> Pays </th>
                <td mat-cell *matCellDef="let row"> {{row.country}} </td>
            </ng-container>

            <!-- Total Cases Column -->
            <ng-container matColumnDef="totalCases">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Cas Confirmés </th>
                <td mat-cell *matCellDef="let row"> {{row.totalCases | number}} </td>
            </ng-container>

            <!-- Deaths Column -->
            <ng-container matColumnDef="deaths">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Décès </th>
                <td mat-cell *matCellDef="let row" style="color: #d32f2f;"> {{row.deaths | number}} </td>
            </ng-container>

            <!-- Recovered Column -->
            <ng-container matColumnDef="recovered">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Rétablis </th>
                <td mat-cell *matCellDef="let row" style="color: #2e7d32;"> {{row.recovered | number}} </td>
            </ng-container>

            <!-- Mortality Rate Column -->
            <ng-container matColumnDef="mortalityRate">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Taux de Mortalité </th>
                <td mat-cell *matCellDef="let row" style="font-weight: 500; color: #d32f2f;"> {{row.mortalityRate}}% </td>
            </ng-container>

            <!-- Recovery Rate Column -->
            <ng-container matColumnDef="recoveryRate">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Taux de Guérison </th>
                <td mat-cell *matCellDef="let row" style="font-weight: 500; color: #2e7d32;"> {{row.recoveryRate}}% </td>
            </ng-container>

            <!-- Header row -->
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            
            <!-- Data rows -->
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

            <!-- Row shown when there is no matching data. -->
            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="6" style="text-align: center; padding: 20px;">
                    <div *ngIf="dataSource.data.length === 0">Chargement des données...</div>
                    <div *ngIf="dataSource.data.length > 0">Aucun pays ne correspond au filtre "{{input.value}}"</div>
                </td>
            </tr>
        </table>

        <mat-paginator [pageSizeOptions]="[50, 100, 200, 250]" aria-label="Sélectionner une page de pays"></mat-paginator>
    </div>
</div>

