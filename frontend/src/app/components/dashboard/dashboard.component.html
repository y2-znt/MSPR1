<div class="dashboard-container">
  <!-- Header -->
  <div class="dashboard-header">
    <h1 class="mat-headline-4">Tableau de Bord COVID-19</h1>
    <div class="header-actions">
      <mat-form-field appearance="outline">
        <mat-label>Période</mat-label>
        <mat-date-range-input [formGroup]="dateRange" [rangePicker]="picker">
          <input matStartDate placeholder="Début" formControlName="start" />
          <input matEndDate placeholder="Fin" formControlName="end" />
        </mat-date-range-input>
        <mat-datepicker-toggle
          matIconSuffix
          [for]="picker"
        ></mat-datepicker-toggle>
        <mat-date-range-picker #picker></mat-date-range-picker>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Sélectionner des pays</mat-label>
        <mat-select [formControl]="countriesControl" multiple>
          <mat-option
            *ngFor="let country of countries | orderByAlpha"
            [value]="country"
          >
            {{ country.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>

  <p class="dashboard-subtitle">
    Surveiller et analyser les statistiques COVID-19 dans le monde entier
  </p>

  <!-- KPI Cards -->
  <div class="kpi-grid">
    <mat-card class="kpi-card">
      <mat-card-content>
        <div class="kpi-header">
          <h2>Cas Totaux</h2>
          <mat-icon>people</mat-icon>
        </div>
        <div class="kpi-value">{{ totalCases | number }}</div>
        <div class="kpi-subtitle">Cas confirmés de COVID-19 dans le monde</div>
      </mat-card-content>
    </mat-card>

    <mat-card class="kpi-card">
      <mat-card-content>
        <div class="kpi-header">
          <h2>Décès Totaux</h2>
          <mat-icon>warning</mat-icon>
        </div>
        <div class="kpi-value">{{ totalDeaths | number }}</div>
        <div class="kpi-subtitle">Taux de mortalité: {{ mortalityRate }}%</div>
      </mat-card-content>
    </mat-card>

    <mat-card class="kpi-card">
      <mat-card-content>
        <div class="kpi-header">
          <h2>Guérisons</h2>
          <mat-icon>health_and_safety</mat-icon>
        </div>
        <div class="kpi-value">{{ totalRecoveries | number }}</div>
        <div class="kpi-subtitle">Taux de guérison: {{ recoveryRate }}%</div>
      </mat-card-content>
    </mat-card>

    <mat-card class="kpi-card">
      <mat-card-content>
        <div class="kpi-header">
          <h2>Tests Effectués</h2>
          <mat-icon>science</mat-icon>
        </div>
        <div class="kpi-value">{{ totalTests | number }}</div>
        <div class="kpi-subtitle">Tests COVID-19 totaux dans le monde</div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Navigation Tabs -->
  <mat-tab-group
    mat-stretch-tabs="false"
    mat-align-tabs="start"
    class="dashboard-tabs"
  >
    <mat-tab label="Vue d'ensemble">
      <div class="chart-container">
        <mat-card class="chart-card">
          <mat-card-header>
            <mat-card-title>Cas COVID-19 Mondiaux</mat-card-title>
            <mat-card-subtitle
              >Répartition mensuelle des cas confirmés, actifs, guéris et
              décès</mat-card-subtitle
            >
          </mat-card-header>
          <mat-card-content>
            <canvas
              baseChart
              [data]="areaChartData"
              [options]="areaChartOptions"
              [type]="'line'"
            >
            </canvas>
          </mat-card-content>
        </mat-card>
      </div>
    </mat-tab>
    <mat-tab label="Pays"></mat-tab>
    <mat-tab label="Données régionales"></mat-tab>
    <mat-tab label="Tendances"></mat-tab>
  </mat-tab-group>
</div>
